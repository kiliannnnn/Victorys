@startuml etat-centrale
skinparam backgroundColor LightCyan
skinparam state {
  StartColor MediumBlue
  EndColor Red
  BackgroundColor LemonChiffon
  BorderColor Black
  FontName Arial
}

[*] --> Inactif

state Inactif {
  [*] --> AttenteActivation
  AttenteActivation --> En_attente : Interrupteur ON
}

state En_attente {
  [*] --> Actif : Après 2 minutes
  En_attente --> [*] : Interrupteur OFF
}

state Actif {
  [*] --> Veille
  Veille --> En_alerte : Détection d'intrusion + temps écoulé
  Veille --> [*] : Code correct saisi (reset du compteur)
  
  state En_alerte {
    [*] --> AlerteActive
    AlerteActive --> Actif : Désactivation de l'alerte (code correct)
  }
  
  state Désactive {
    [*] --> DésactivationComplete
    DésactivationComplete --> Inactif : Désactivation complète
  }

  Actif --> Désactive : Code correct saisi
  Actif --> [*] : Interrupteur OFF
  En_alerte --> [*] : Interrupteur OFF
}

note right of Actif : Si le système est actif et aucune alerte, il passe en veille après une période
note right of En_alerte : Alerte déclenchée en cas d'intrusion non validée
@enduml
