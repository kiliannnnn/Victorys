@startuml ex1
skinparam backgroundColor LightYellow
skinparam state {
  StartColor MediumBlue
  EndColor Red
  BackgroundColor PaleGreen
  BorderColor Black
  FontName Arial
}

[*] --> Inactif

state Inactif {
  [*] --> AttenteInsertion : Attente d'insertion de pièces
  AttenteInsertion --> AcceptingCoins : Pièces insérées
}

state AcceptingCoins {
  AcceptingCoins --> SelectingProduct : Sélection du produit
  AcceptingCoins --> RejectingCoins : Fonds insuffisants ou produit épuisé
  RejectingCoins --> Inactif : Pièces rejetées (retour à l'état inactif)
}

state SelectingProduct {
  [*] --> ConfirmerSelection : Confirmer la sélection
  ConfirmerSelection --> DispensingProduct : Sélection confirmée
  ConfirmerSelection --> Inactif : Annuler (retirer les pièces)
}

state DispensingProduct {
  [*] --> GivingChange : Distribution du produit et calcul de la monnaie
  GivingChange --> Inactif : Monnaie rendue et transaction terminée
}

state RejectingCoins {
  [*] --> Inactif : Pièces rejetées et transaction annulée
}

note right of AcceptingCoins : Le distributeur accepte les pièces jusqu'à la sélection ou l'annulation
note right of DispensingProduct : Le produit est distribué, et la monnaie est calculée
note right of RejectingCoins : Si les fonds sont insuffisants, les pièces sont renvoyées à l'utilisateur
@enduml
