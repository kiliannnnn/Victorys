@startuml etat-duel
skinparam backgroundColor LightYellow
skinparam state {
  StartColor MediumBlue
  EndColor Red
  BackgroundColor PaleGreen
  BorderColor Black
  FontName Arial
}

[*] --> En_Attente_Confirmation

state En_Attente_Confirmation {
  [*] --> Invitation_Envoyee
  Invitation_Envoyee --> Accepte : Joueurs acceptent
  Invitation_Envoyee --> Refuse : Refus d'un joueur
  Invitation_Envoyee --> Expire : Temps dépassé
}

Accepte --> Preparation
Refuse --> [*]
Expire --> [*]

state Preparation {
  [*] --> Instructions_Envoyees
  Instructions_Envoyees --> Valide_Amis : Joueurs valident ajout amis
  Instructions_Envoyees --> Expire_Validation : Temps dépassé
}

Valide_Amis --> En_Cours
Expire_Validation --> [*]

state En_Cours {
  [*] --> Duel_Joue
  Duel_Joue --> Declaration_Resultat : Déclaration des résultats
}

state Declaration_Resultat {
  [*] --> Resultat_Valide : Résultat validé par les deux joueurs
  Declaration_Resultat --> Litige : Désaccord sur le résultat
}

Litige --> Resolution_Admin : Arbitrage par un administrateur
Resolution_Admin --> Resultat_Valide : Résolution confirmée

Resultat_Valide --> Terminé
Terminé --> [*]

@enduml
